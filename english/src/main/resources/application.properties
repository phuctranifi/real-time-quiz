spring.application.name=english

# Instance ID for multi-instance deployment
# In production, set this via environment variable (e.g., hostname, pod name)
# Example: SPRING_APPLICATION_INSTANCE_ID=${HOSTNAME}
spring.application.instance-id=${HOSTNAME:localhost}

# Server Configuration
server.port=8080

# Redis Configuration
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.password=
spring.data.redis.database=0
spring.data.redis.timeout=2000ms

# Redis Connection Pool (Lettuce)
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0
spring.data.redis.lettuce.pool.max-wait=-1ms

# WebSocket Configuration
# For production, configure specific allowed origins
# spring.websocket.allowed-origins=https://yourdomain.com

# Quiz Configuration
# Number of top users to broadcast in leaderboard updates
quiz.leaderboard.top-n=10

# WebSocket Heartbeat Configuration
# Interval at which clients should send heartbeat messages (seconds)
quiz.websocket.heartbeat.interval-seconds=30
# Timeout multiplier (session considered stale if no heartbeat for interval * multiplier)
quiz.websocket.heartbeat.timeout-multiplier=2
# How often to check for stale connections (milliseconds)
quiz.websocket.heartbeat.check-interval-ms=60000

# Rate Limiting Configuration
# Token bucket capacity (max burst size)
quiz.rate-limit.capacity=10
# Tokens to refill per period
quiz.rate-limit.refill-tokens=5
# Refill period (seconds)
quiz.rate-limit.refill-period-seconds=1

# Redis Health Check Configuration
# How often to ping Redis (milliseconds)
quiz.redis.health-check-interval-ms=10000

# Spring Actuator Configuration
# Enable health and metrics endpoints
management.endpoints.web.exposure.include=health,metrics,prometheus,info
management.endpoint.health.show-details=always
management.metrics.export.prometheus.enabled=true

# Logging Configuration
logging.level.root=INFO
logging.level.com.quiz.english=DEBUG
logging.level.org.springframework.web.socket=DEBUG
logging.level.org.springframework.messaging=DEBUG
logging.level.io.github.resilience4j=DEBUG

# Logging Pattern (Structured Logging)
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
